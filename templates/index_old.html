<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Semantic Search | E-commerce Intelligence</title>
  <meta name="description" content="Discover products faster with AI-powered semantic search across all categories. Smart filtering, natural language queries, and personalized results." />

  <!-- Google Fonts: Inter for clean, modern typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CSS v3 with custom configuration -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            'primary': '#0ea5e9', // Sky-500 - Clean blue
            'primary-dark': '#0284c7', // Sky-600
            'accent': '#06b6d4', // Cyan-500 - Teal accent
            'accent-dark': '#0891b2', // Cyan-600
            'success': '#10b981', // Emerald-500
            'warning': '#f59e0b', // Amber-500
            'error': '#ef4444', // Red-500
            'surface': '#f8fafc', // Slate-50
            'surface-dark': '#0f172a', // Slate-900
            'card': '#ffffff',
            'card-dark': '#1e293b', // Slate-800
          },
          boxShadow: {
            'soft': '0 2px 16px -4px rgba(0,0,0,0.08)',
            'medium': '0 4px 24px -8px rgba(0,0,0,0.12)',
            'strong': '0 8px 32px -12px rgba(0,0,0,0.16)',
            'glow': '0 0 40px -12px rgba(14, 165, 233, 0.3)'
          },
          borderRadius: {
            'xl': '1rem',
            '2xl': '1.25rem',
            '3xl': '1.5rem',
            '4xl': '2rem'
          },
          fontSize: {
            'xs': ['0.75rem', { lineHeight: '1.5' }],
            'sm': ['0.875rem', { lineHeight: '1.6' }],
            'base': ['1rem', { lineHeight: '1.6' }],
            'lg': ['1.125rem', { lineHeight: '1.6' }],
            'xl': ['1.25rem', { lineHeight: '1.5' }],
            '2xl': ['1.5rem', { lineHeight: '1.4' }],
            '3xl': ['1.875rem', { lineHeight: '1.3' }],
            '4xl': ['2.25rem', { lineHeight: '1.2' }],
          }
        },
        fontFamily: {
          sans: ["Inter", "ui-sans-serif", "system-ui", "-apple-system", "Segoe UI", "Roboto", "Helvetica", "Arial", "sans-serif"]
        }
      }
    }
  </script>

  <!-- Font Awesome (icons for stars, external link, etc.) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    /* Global typography and layout */
    html, body { 
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    }
    h1, h2, h3, h4, h5, h6 { font-weight: 600; letter-spacing: -0.025em; }
    
    /* Custom gradient backgrounds */
    .gradient-bg {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
    }
    .gradient-surface {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    }

    /* Enhanced shimmer effect */
    .skeleton {
      position: relative;
      overflow: hidden;
      background: linear-gradient(90deg, 
        rgba(203, 213, 225, 0.3) 25%, 
        rgba(226, 232, 240, 0.5) 37%, 
        rgba(203, 213, 225, 0.3) 63%);
      background-size: 400% 100%;
      animation: skeleton-loading 1.6s ease-in-out infinite;
    }
    .dark .skeleton {
      background: linear-gradient(90deg, 
        rgba(51, 65, 85, 0.6) 25%, 
        rgba(71, 85, 105, 0.8) 37%, 
        rgba(51, 65, 85, 0.6) 63%);
      background-size: 400% 100%;
    }
    @keyframes skeleton-loading {
      0% { background-position: 100% 50%; }
      100% { background-position: 0 50%; }
    }

    /* Smooth animations */
    @keyframes fade-in { 
      from { opacity: 0; } 
      to { opacity: 1; } 
    }
    @keyframes slide-up { 
      from { opacity: 0; transform: translateY(16px); } 
      to { opacity: 1; transform: translateY(0); } 
    }
    @keyframes float { 
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-4px); }
    }
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px -8px rgba(14, 165, 233, 0.4); }
      50% { box-shadow: 0 0 30px -8px rgba(14, 165, 233, 0.6); }
    }

    .animate-fade-in { animation: fade-in 0.5s ease-out both; }
    .animate-slide-up { animation: slide-up 0.4s ease-out both; }
    .animate-float { animation: float 3s ease-in-out infinite; }
    .animate-pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }

    /* Custom scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: rgba(148, 163, 184, 0.4); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: rgba(148, 163, 184, 0.6); }
    .dark ::-webkit-scrollbar-thumb { background: rgba(100, 116, 139, 0.4); }
    .dark ::-webkit-scrollbar-thumb:hover { background: rgba(100, 116, 139, 0.6); }

    /* Search suggestions hover effect */
    .suggestion-card {
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }
    .suggestion-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 32px -12px rgba(0,0,0,0.16);
    }

    /* Glassmorphism effect for search bar */
    .glass-effect {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
    .dark .glass-effect {
      background: rgba(30, 41, 59, 0.9);
    }
  </style>
</head>

<body class="font-sans bg-surface dark:bg-surface-dark text-slate-900 dark:text-slate-100 transition-all duration-300">
  <!-- Sticky Header with centered search -->
  <header class="sticky top-0 z-50 bg-white/90 dark:bg-gray-900/80 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-gray-900/60 border-b border-gray-200 dark:border-gray-800 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16 sm:h-20">
        <!-- Logo + Title -->
        <a href="#" class="flex items-center gap-3 focus:outline-none focus-visible:ring-2 focus-visible:ring-flipkart-blue rounded-lg" aria-label="Flipkart Fashion Search home">
          <span class="w-10 h-10 rounded-lg bg-gradient-to-r from-flipkart-blue to-flipkart-orange flex items-center justify-center text-white">
            <i class="fa-solid fa-bag-shopping" aria-hidden="true"></i>
          </span>
          <span class="sr-only sm:not-sr-only sm:block text-lg sm:text-xl font-semibold text-gray-900 dark:text-white">Flipkart Fashion Search</span>
        </a>

        <!-- Dark mode toggle -->
        <button id="darkModeToggle" class="inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-flipkart-blue" aria-label="Toggle color theme">
          <i class="fa-solid fa-moon text-base dark:hidden" aria-hidden="true"></i>
          <i class="fa-solid fa-sun text-base hidden dark:inline" aria-hidden="true"></i>
          <span class="sr-only">Toggle dark mode</span>
        </button>
      </div>

      <!-- Centered Search Bar -->
      <div class="pb-4 sm:pb-6">
        <form class="max-w-3xl mx-auto" role="search" aria-label="Product search" onsubmit="event.preventDefault(); doSearch();">
          <label for="searchInput" class="sr-only">Search products</label>
          <div class="relative group">
            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
              <i class="fa-solid fa-magnifying-glass text-gray-400 text-lg" aria-hidden="true"></i>
            </div>
            <input id="searchInput" name="q" type="text" inputmode="search" autocomplete="off" placeholder="Try ‘red Nike shoes’ or ‘formal shirt under 2000’…" class="w-full pl-12 pr-36 py-4 text-base sm:text-lg rounded-16 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-flipkart-blue focus:border-transparent shadow-sm" />
            <button id="searchBtn" type="submit" class="absolute right-2 top-2 bottom-2 px-5 sm:px-6 inline-flex items-center gap-2 rounded-xl bg-flipkart-blue text-white font-medium hover:bg-blue-600 shadow-md hover:shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-flipkart-blue focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900 transition">
              <span>Search</span>
              <i class="fa-solid fa-arrow-right" aria-hidden="true"></i>
            </button>
          </div>

          <!-- Options -->
          <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-700 dark:text-gray-300">
            <div class="flex items-center gap-3">
              <input id="useReranking" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-flipkart-blue focus:ring-flipkart-blue" checked />
              <label for="useReranking">Use Cohere Reranking API for more relevant results</label>
            </div>
            <div class="flex items-center gap-3 justify-start sm:justify-end">
              <label class="mr-1">Mode:</label>
              <select id="searchMode" class="rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-2 py-1 focus:outline-none focus:ring-2 focus:ring-flipkart-blue">
                <option value="text" selected>Full-text</option>
                <option value="vector">Vector</option>
                <option value="hybrid">Hybrid</option>
              </select>
            </div>
          </div>
        </form>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Intro blurb -->
    <section class="mb-8 sm:mb-10 text-center">
      <p class="mx-auto max-w-2xl text-base sm:text-lg text-gray-600 dark:text-gray-300">Discover the latest fashion trends with our intelligent search powered by natural language processing.</p>
    </section>

    <!-- API Documentation Links -->
    <section class="mb-8">
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-800 rounded-2xl p-5 sm:p-6 shadow-sm">
        <div class="flex items-center justify-between flex-wrap gap-4">
          <div class="flex items-center gap-3">
            <i class="fa-solid fa-code text-flipkart-blue text-xl" aria-hidden="true"></i>
            <h2 class="text-lg font-semibold">API Documentation</h2>
          </div>
          <div class="flex flex-wrap gap-3">
            <a href="/docs" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-flipkart-blue">
              <i class="fa-solid fa-book" aria-hidden="true"></i>
              <span>Interactive Docs</span>
              <i class="fa-solid fa-arrow-up-right-from-square text-xs" aria-hidden="true"></i>
              <span class="sr-only">Opens in a new tab</span>
            </a>
            <a href="/redoc" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-flipkart-blue">
              <i class="fa-regular fa-file-lines" aria-hidden="true"></i>
              <span>ReDoc</span>
              <i class="fa-solid fa-arrow-up-right-from-square text-xs" aria-hidden="true"></i>
              <span class="sr-only">Opens in a new tab</span>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Results Section -->
    <section id="results" class="animate-fade-in" aria-live="polite" aria-busy="false">
      <!-- Default empty state -->
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-800 rounded-2xl p-10 text-center">
        <i class="fa-solid fa-shirt text-gray-400 text-4xl mb-3" aria-hidden="true"></i>
        <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100">Search for fashion you love</h3>
        <p class="text-gray-600 dark:text-gray-400 mt-1">Use the search bar above to find products by style, brand, color, or price.</p>
      </div>
    </section>
  </main>

  <footer class="py-8 text-center text-sm text-gray-500 dark:text-gray-400">
    <p>Built with FastAPI · Accessible, responsive UI</p>
  </footer>

  <script>
    // Dark mode preference
    const htmlEl = document.documentElement;
    const savedTheme = localStorage.getItem('theme') || 'light';
    if (savedTheme === 'dark') htmlEl.classList.add('dark');

    document.getElementById('darkModeToggle').addEventListener('click', () => {
      htmlEl.classList.toggle('dark');
      localStorage.setItem('theme', htmlEl.classList.contains('dark') ? 'dark' : 'light');
    });

    // Helpers
    function setBusy(isBusy) {
      const results = document.getElementById('results');
      results.setAttribute('aria-busy', String(isBusy));
    }

    // Perform search
    function doSearch() {
      const query = document.getElementById('searchInput').value.trim();
      const resultsDiv = document.getElementById('results');
      const searchBtn = document.getElementById('searchBtn');
      const useReranking = document.getElementById('useReranking').checked;
      const searchMode = document.getElementById('searchMode').value; // text | vector | hybrid

      if (!query) { showNotification('Please enter a search term', 'warning'); return; }

      // Button loading state
      searchBtn.disabled = true;
      searchBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin" aria-hidden="true"></i><span class="sr-only">Searching…</span><span class="ml-2">Searching…</span>';

      // Show skeletons
      setBusy(true);
      resultsDiv.innerHTML = createSkeletonLoaders();

      const start = performance.now();

      fetch('/api/search/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ query, limit: 12, use_reranking: useReranking, mode: searchMode })
      })
      .then(r => r.json())
      .then(data => {
        // If API doesn't provide execution_time, compute locally
        if (!data.execution_time) {
          data.execution_time = (performance.now() - start) / 1000;
        }
        data.search_mode = searchMode;
        showResults(data);
      })
      .catch(err => {
        console.error(err);
        showError('Search failed. Please try again.');
      })
      .finally(() => {
        setBusy(false);
        searchBtn.disabled = false;
        searchBtn.innerHTML = '<span>Search</span><i class="fa-solid fa-arrow-right" aria-hidden="true"></i>';
      });
    }

    // Skeleton loaders
    function createSkeletonLoaders() {
      const cards = Array.from({ length: 8 }).map(() => `
        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-800 rounded-2xl overflow-hidden shadow-sm">
          <div class="p-2 bg-gray-50 dark:bg-gray-700">
            <div class="aspect-w-1 aspect-h-1 skeleton rounded-xl"></div>
          </div>
          <div class="p-4 space-y-3">
            <div class="skeleton h-4 w-3/4 rounded"></div>
            <div class="skeleton h-4 w-1/2 rounded"></div>
            <div class="flex items-center gap-2">
              <div class="skeleton h-3 w-24 rounded"></div>
              <div class="skeleton h-3 w-10 rounded"></div>
            </div>
            <div class="skeleton h-5 w-20 rounded"></div>
            <div class="skeleton h-9 w-full rounded-lg"></div>
          </div>
        </div>
      `).join('');

      return `
        <div class="mb-6 animate-slide-up">
          <div class="flex items-end justify-between flex-wrap gap-3">
            <div>
              <h2 class="text-xl font-semibold">Searching…</h2>
              <p class="text-sm text-gray-500 dark:text-gray-400">Fetching results, hang tight.</p>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" role="status" aria-label="Loading search results">
          ${cards}
        </div>
      `;
    }

    // Render results
    function showResults(data) {
      const resultsDiv = document.getElementById('results');

      if (data.detail) { showError('API Error: ' + data.detail); return; }
      if (!data.results || data.results.length === 0) { showNoResults(); return; }

      const count = data.results.length;
      const modeBadge = data.search_mode === 'vector' ? 'Vector' : (data.search_mode === 'text' ? 'Full-text' : 'Hybrid');
      const header = `
        <div class="mb-6 animate-slide-up">
          <div class="flex items-start justify-between flex-wrap gap-3">
            <div>
              <h2 class="text-2xl font-semibold">Found ${count} products</h2>
              <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                <span class="inline-flex items-center px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-700 mr-2">${modeBadge} mode</span>
                ${data.reranked ? '<i class="fa-solid fa-check-circle text-green-600 dark:text-green-400 mr-1" aria-hidden="true"></i> Ranked by Cohere' : 'Standard ranking'}
                ${data.execution_time ? ` • Search completed in ${Number(data.execution_time).toFixed(2)} s` : ''}
              </p>
            </div>
          </div>
        </div>`;

      const gridOpen = '<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">';
      const gridClose = '</div>';
      const cards = data.results.map(createProductCard).join('');

      resultsDiv.innerHTML = header + gridOpen + cards + gridClose;

      // Staggered reveal
      resultsDiv.querySelectorAll('.product-card').forEach((card, i) => {
        card.style.animation = `slide-up .35s ease-out ${i * 40}ms both`;
      });
    }

    // Product card
    function createProductCard(product) {
      const rating = product.average_rating_numeric ? parseFloat(product.average_rating_numeric) : 0;
      const stars = generateStarRating(rating);
      const hasDiscount = product.discount && product.discount !== '0%' && product.discount !== '';
      const price = product.selling_price_numeric || 0;
      const mrp = hasDiscount ? Math.max(price, Math.floor(price * 1.25)) : null;

      const img = (product.images && product.images.length > 0) ? product.images[0] : '';
      const title = product.title || 'Untitled product';
      const brand = product.brand && product.brand !== 'Unknown' ? product.brand : '';

      return `
        <article class="product-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-800 rounded-2xl overflow-hidden shadow-sm hover:shadow-lift transition will-change-transform">
          <div class="relative p-2 bg-gray-50 dark:bg-gray-700">
            <div class="aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-xl">
              ${img ? `<img src="${img}" alt="${escapeHtml(title)} image" class="object-contain w-full h-full transition-transform duration-300 group-hover:scale-105" onerror="this.closest('.aspect-w-1').innerHTML=\'<div class=\\'w-full h-full flex items-center justify-center\\'><i class=\\'fa-regular fa-image text-gray-400 text-xl\\' aria-hidden=\\'true\\'></i></div>\'">` : `<div class="w-full h-full flex items-center justify-center"><i class="fa-regular fa-image text-gray-400 text-xl" aria-hidden="true"></i></div>`}
            </div>
            ${hasDiscount ? `<span class="absolute top-2 left-2 inline-flex items-center px-2 py-0.5 text-xs font-semibold rounded bg-red-600 text-white" aria-label="Discount">${product.discount}</span>` : ''}
            ${product.relevance_score !== undefined ? `<span class="absolute top-2 right-2 inline-flex items-center px-2 py-0.5 text-xs font-semibold rounded bg-flipkart-blue text-white" title="Relevance score">${(product.relevance_score * 100).toFixed(0)}% match</span>` : ''}
          </div>

          <div class="p-4 space-y-2">
            <h3 class="text-sm sm:text-base font-semibold leading-snug line-clamp-2">${escapeHtml(title)}</h3>

            ${rating > 0 ? `
              <div class="flex items-center gap-1 text-yellow-500 text-xs" aria-label="Rating: ${rating.toFixed(1)} out of 5">
                ${stars}
                <span class="ml-1 text-blue-600 dark:text-blue-400">${rating.toFixed(1)}</span>
              </div>` : ''}

            <div class="flex items-baseline gap-2">
              <span class="text-lg font-semibold">₹${Number(price).toLocaleString()}</span>
              ${mrp ? `<span class="text-xs text-gray-500 line-through">₹${Number(mrp).toLocaleString()}</span>` : ''}
              ${hasDiscount ? `<span class="text-xs font-semibold text-red-700 bg-red-100 dark:text-red-200 dark:bg-red-900/40 px-2 py-0.5 rounded">${product.discount} off</span>` : ''}
            </div>

            ${brand ? `<p class="text-xs text-gray-500">${escapeHtml(brand)}</p>` : ''}

            <div class="pt-1">
              ${product.url ? `
                <a href="${product.url}" target="_blank" rel="noopener noreferrer" class="w-full inline-flex items-center justify-center gap-2 text-sm font-medium bg-flipkart-blue hover:bg-blue-600 text-white py-2.5 rounded-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-flipkart-blue focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-800">
                  <span>View on Flipkart</span>
                  <i class="fa-solid fa-arrow-up-right-from-square text-xs" aria-hidden="true"></i>
                  <span class="sr-only">Opens in a new tab</span>
                </a>` : `
                <div class="w-full inline-flex items-center justify-center text-sm font-medium bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 py-2.5 rounded-lg cursor-not-allowed">Not available</div>`}
            </div>
          </div>
        </article>
      `;
    }

    function generateStarRating(rating) {
      let stars = '';
      const full = Math.floor(rating);
      const half = rating % 1 >= 0.5;
      for (let i = 0; i < full; i++) stars += '<i class="fa-solid fa-star" aria-hidden="true"></i>';
      if (half) stars += '<i class="fa-solid fa-star-half-stroke" aria-hidden="true"></i>';
      const empty = 5 - full - (half ? 1 : 0);
      for (let i = 0; i < empty; i++) stars += '<i class="fa-regular fa-star" aria-hidden="true"></i>';
      return stars;
    }

    // Utilities
    function escapeHtml(str) {
      return String(str).replace(/[&<>"]+/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[s]));
    }

    function showError(message) {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = `
        <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl p-8 text-center animate-slide-up">
          <i class="fa-solid fa-triangle-exclamation text-red-600 text-3xl mb-3" aria-hidden="true"></i>
          <h3 class="text-lg font-semibold text-red-700 dark:text-red-400 mb-1">Search Error</h3>
          <p class="text-red-700/90 dark:text-red-300">${escapeHtml(message)}</p>
        </div>`;
    }

    function showNoResults() {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = `
        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-800 rounded-2xl p-10 text-center animate-slide-up">
          <i class="fa-solid fa-magnifying-glass text-gray-400 text-4xl mb-3" aria-hidden="true"></i>
          <h3 class="text-lg font-semibold">No products found</h3>
          <p class="text-gray-600 dark:text-gray-400 mt-1 mb-4">Try different keywords, include a brand or a price range.</p>
          <button type="button" class="px-4 py-2 rounded-lg bg-flipkart-blue text-white hover:bg-blue-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-flipkart-blue" onclick="document.getElementById('searchInput').focus()">Try another search</button>
        </div>`;
    }

    function showNotification(message, type = 'info') {
      const palette = { info: 'bg-blue-600', success: 'bg-green-600', warning: 'bg-yellow-600', error: 'bg-red-600' };
      const toast = document.createElement('div');
      toast.className = `fixed top-24 right-4 ${palette[type] || palette.info} text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-slide-up`;
      toast.role = 'status';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 2800);
    }

    // Keyboard shortcuts and initial focus
    document.addEventListener('DOMContentLoaded', () => {
      const input = document.getElementById('searchInput');
      input.focus();
      input.addEventListener('keypress', e => { if (e.key === 'Enter') doSearch(); });
    });
  </script>
</body>
</html>